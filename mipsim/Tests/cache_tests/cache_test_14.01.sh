../../mipsim ${MIPSIM_FLAGS} -ds 64 -db 8 -da 1 -dwb > output.txt <<'EOF'

m 80000000 = 83000000
m 80000004 = 83000004
m 80000008 = 83000008
m 8000000c = 8300000c
m 80010000 = 83010000
m 80010004 = 83010004
m 80010008 = 83010008
m 8001000c = 8301000c
m 80020000 = 83020000
m 80020004 = 83020004
m 80020008 = 83020008
m 8002000c = 8302000c

m 0000 = ac220000  # sw $2, 0000($1)
m 0004 = 8c220000  # lw $2, 0000($1)

pd 80000000
pd 80000008
pd 80010000
pd 80010008
pd 80020000
pd 80020008
m 80000000
m 80000004
m 80000008
m 8000000c
m 80010000
m 80010004
m 80010008
m 8001000c
m 80020000
m 80020004
m 80020008
m 8002000c

# Read from address in set 0.

$1 = 80000000
pc = 0004
.
$2
pd 80000000
pd 80000008
pd 80010000
pd 80010008
pd 80020000
pd 80020008
m 80000000
m 80000004
m 80000008
m 8000000c
m 80010000
m 80010004
m 80010008
m 8001000c
m 80020000
m 80020004
m 80020008
m 8002000c

# Write to address in set 0, expect write hit (entry becomes dirty).

$1 = 80000000
$2 = 85000000
pc = 0000
.
pd 80000000
pd 80000008
pd 80010000
pd 80010008
pd 80020000
pd 80020008
m 80000000
m 80000004
m 80000008
m 8000000c
m 80010000
m 80010004
m 80010008
m 8001000c
m 80020000
m 80020004
m 80020008
m 8002000c

# Write to addresses in set 1, expect write miss (entry becomes dirty).

$1 = 80000008
$2 = 85000008
pc = 0000
.
pd 80000000
pd 80000008
pd 80010000
pd 80010008
pd 80020000
pd 80020008
m 80000000
m 80000004
m 80000008
m 8000000c
m 80010000
m 80010004
m 80010008
m 8001000c
m 80020000
m 80020004
m 80020008
m 8002000c

# Read from 2nd address in set 0, expect miss with write-back.

$1 = 80010000
pc = 0004
$2
.
pd 80000000
pd 80000008
pd 80010000
pd 80010008
pd 80020000
pd 80020008
m 80000000
m 80000004
m 80000008
m 8000000c
m 80010000
m 80010004
m 80010008
m 8001000c
m 80020000
m 80020004
m 80020008
m 8002000c

# Write to 2nd addresss in set 1, expect miss with write-back.

$1 = 80010008
$2 = 87010008
pc = 0000
.
pd 80000000
pd 80000008
pd 80010000
pd 80010008
pd 80020000
pd 80020008
m 80000000
m 80000004
m 80000008
m 8000000c
m 80010000
m 80010004
m 80010008
m 8001000c
m 80020000
m 80020004
m 80020008
m 8002000c

# Read from 3rd address in set 0, expect miss with no write-back.

$1 = 80020000
pc = 0004
.
$2
pd 80000000
pd 80000008
pd 80010000
pd 80010008
pd 80020000
pd 80020008
m 80000000
m 80000004
m 80000008
m 8000000c
m 80010000
m 80010004
m 80010008
m 8001000c
m 80020000
m 80020004
m 80020008
m 8002000c

# Read from 3rd address in set 1, expect miss with write-back.

$1 = 80020008
pc = 0004
.
$2
pd 80000000
pd 80000008
pd 80010000
pd 80010008
pd 80020000
pd 80020008
m 80000000
m 80000004
m 80000008
m 8000000c
m 80010000
m 80010004
m 80010008
m 8001000c
m 80020000
m 80020004
m 80020008
m 8002000c


EOF
